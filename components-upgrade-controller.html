<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SUSE Edge Documentation | Upgrade Controller</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Upgrade Controller"/>
<meta name="description" content="See the Upgrade Controller documentation."/>
<meta name="book-title" content="SUSE Edge Documentation"/>
<meta name="chapter-title" content="Chapter 20. Upgrade Controller"/>
<meta name="tracker-url" content="https://github.com/suse-edge/suse-edge.github.io/issues/new"/>
<meta name="tracker-type" content="gh"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Upgrade Controller"/>
<meta property="og:description" content="See the Upgrade Controller documentation."/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Upgrade Controller"/>
<meta name="twitter:description" content="See the Upgrade Controller documentation."/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    

    "headline": "Upgrade Controller",
  
    "description": "Upgrade Controller",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="components-system-upgrade-controller.html" title="Chapter 19. System Upgrade Controller"/><link rel="next" href="id-how-to-guides.html" title="Part III. How-To Guides"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="wide offline js-off"><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">SUSE Edge Documentation</a><span> / </span><a class="crumb" href="id-components-used.html">Components Used</a><span> / </span><a class="crumb" href="components-upgrade-controller.html">Upgrade Controller</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">SUSE Edge Documentation</div><ol><li><a href="id-suse-edge-documentation.html" class=" "><span class="title-number"> </span><span class="title-name">SUSE Edge Documentation</span></a></li><li><a href="id-quick-starts.html" class="has-children "><span class="title-number">I </span><span class="title-name">Quick Starts</span></a><ol><li><a href="quickstart-metal3.html" class=" "><span class="title-number">1 </span><span class="title-name">BMC automated deployments with Metal<sup>3</sup></span></a></li><li><a href="quickstart-elemental.html" class=" "><span class="title-number">2 </span><span class="title-name">Remote host onboarding with Elemental</span></a></li><li><a href="quickstart-eib.html" class=" "><span class="title-number">3 </span><span class="title-name">Standalone clusters with Edge Image Builder</span></a></li></ol></li><li class="active"><a href="id-components-used.html" class="has-children you-are-here"><span class="title-number">II </span><span class="title-name">Components Used</span></a><ol><li><a href="components-rancher.html" class=" "><span class="title-number">4 </span><span class="title-name">Rancher</span></a></li><li><a href="components-rancher-dashboard-extensions.html" class=" "><span class="title-number">5 </span><span class="title-name">Rancher Dashboard Extensions</span></a></li><li><a href="components-fleet.html" class=" "><span class="title-number">6 </span><span class="title-name">Fleet</span></a></li><li><a href="components-slmicro.html" class=" "><span class="title-number">7 </span><span class="title-name">SLE Micro</span></a></li><li><a href="components-metal3.html" class=" "><span class="title-number">8 </span><span class="title-name">Metal<sup>3</sup></span></a></li><li><a href="components-eib.html" class=" "><span class="title-number">9 </span><span class="title-name">Edge Image Builder</span></a></li><li><a href="components-nmc.html" class=" "><span class="title-number">10 </span><span class="title-name">Edge Networking</span></a></li><li><a href="components-elemental.html" class=" "><span class="title-number">11 </span><span class="title-name">Elemental</span></a></li><li><a href="components-akri.html" class=" "><span class="title-number">12 </span><span class="title-name">Akri</span></a></li><li><a href="components-k3s.html" class=" "><span class="title-number">13 </span><span class="title-name">K3s</span></a></li><li><a href="components-rke2.html" class=" "><span class="title-number">14 </span><span class="title-name">RKE2</span></a></li><li><a href="components-longhorn.html" class=" "><span class="title-number">15 </span><span class="title-name">Longhorn</span></a></li><li><a href="components-neuvector.html" class=" "><span class="title-number">16 </span><span class="title-name">NeuVector</span></a></li><li><a href="components-metallb.html" class=" "><span class="title-number">17 </span><span class="title-name">MetalLB</span></a></li><li><a href="components-kubevirt.html" class=" "><span class="title-number">18 </span><span class="title-name">Edge Virtualization</span></a></li><li><a href="components-system-upgrade-controller.html" class=" "><span class="title-number">19 </span><span class="title-name">System Upgrade Controller</span></a></li><li><a href="components-upgrade-controller.html" class=" you-are-here"><span class="title-number">20 </span><span class="title-name">Upgrade Controller</span></a></li></ol></li><li><a href="id-how-to-guides.html" class="has-children "><span class="title-number">III </span><span class="title-name">How-To Guides</span></a><ol><li><a href="guides-metallb-k3s.html" class=" "><span class="title-number">21 </span><span class="title-name">MetalLB on K3s (using L2)</span></a></li><li><a href="guides-metallb-kubernetes.html" class=" "><span class="title-number">22 </span><span class="title-name">MetalLB in front of the Kubernetes API server</span></a></li><li><a href="id-air-gapped-deployments-with-edge-image-builder.html" class=" "><span class="title-number">23 </span><span class="title-name">Air-gapped deployments with Edge Image Builder</span></a></li></ol></li><li><a href="id-third-party-integration.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Third-Party Integration</span></a><ol><li><a href="integrations-nats.html" class=" "><span class="title-number">24 </span><span class="title-name">NATS</span></a></li><li><a href="id-nvidia-gpus-on-sle-micro.html" class=" "><span class="title-number">25 </span><span class="title-name">NVIDIA GPUs on SLE Micro</span></a></li></ol></li><li><a href="day-2-operations.html" class="has-children "><span class="title-number">V </span><span class="title-name">Day 2 Operations</span></a><ol><li><a href="day2-mgmt-cluster.html" class=" "><span class="title-number">26 </span><span class="title-name">Management Cluster</span></a></li><li><a href="day2-downstream-clusters.html" class=" "><span class="title-number">27 </span><span class="title-name">Downstream clusters</span></a></li></ol></li><li><a href="id-product-documentation.html" class="has-children "><span class="title-number">VI </span><span class="title-name">Product Documentation</span></a><ol><li><a href="atip.html" class=" "><span class="title-number">28 </span><span class="title-name">SUSE Adaptive Telco Infrastructure Platform (ATIP)</span></a></li><li><a href="atip-architecture.html" class=" "><span class="title-number">29 </span><span class="title-name">Concept &amp; Architecture</span></a></li><li><a href="atip-requirements.html" class=" "><span class="title-number">30 </span><span class="title-name">Requirements &amp; Assumptions</span></a></li><li><a href="atip-management-cluster.html" class=" "><span class="title-number">31 </span><span class="title-name">Setting up the management cluster</span></a></li><li><a href="atip-features.html" class=" "><span class="title-number">32 </span><span class="title-name">Telco features configuration</span></a></li><li><a href="atip-automated-provisioning.html" class=" "><span class="title-number">33 </span><span class="title-name">Fully automated directed network provisioning</span></a></li><li><a href="atip-lifecycle.html" class=" "><span class="title-number">34 </span><span class="title-name">Lifecycle actions</span></a></li></ol></li><li><a href="id-appendix.html" class="has-children "><span class="title-number">VII </span><span class="title-name">Appendix</span></a><ol><li><a href="id-release-notes.html" class=" "><span class="title-number">35 </span><span class="title-name">Release Notes</span></a></li></ol></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="components-upgrade-controller" data-id-title="Upgrade Controller"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">20 </span><span class="title-name">Upgrade Controller</span></span> <a title="Permalink" class="permalink" href="components-upgrade-controller.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>See the <a class="link" href="https://github.com/suse-edge/upgrade-controller" target="_blank">Upgrade Controller</a> documentation.</p><div class="blockquote"><blockquote class="blockquote"><p>A Kubernetes controller capable of performing infrastructure platform upgrades consisting of:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Operating System (SL Micro)</p></li><li class="listitem"><p>Kubernetes (K3s &amp; RKE2)</p></li><li class="listitem"><p>Additional components (Rancher, Elemental, NeuVector, etc.)</p></li></ul></div></blockquote></div><section class="sect1" id="id-how-does-suse-edge-use-upgrade-controller" data-id-title="How does SUSE Edge use Upgrade Controller?"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">20.1 </span><span class="title-name">How does SUSE Edge use Upgrade Controller?</span></span> <a title="Permalink" class="permalink" href="components-upgrade-controller.html#id-how-does-suse-edge-use-upgrade-controller">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>The <span class="strong"><strong>Upgrade Controller</strong></span> is essential in automating the (formerly manual) <code class="literal">Day 2</code> operations required to upgrade <code class="literal">management</code> clusters from one SUSE Edge release version to the next.</p><p>To achieve this automation, the <code class="literal">Upgrade Controller</code> utilizes tools such as the System Upgrade Controller (<a class="xref" href="components-system-upgrade-controller.html" title="Chapter 19. System Upgrade Controller">Chapter 19, <em>System Upgrade Controller</em></a>) and the <a class="link" href="https://github.com/k3s-io/helm-controller/" target="_blank">Helm Controller</a>.</p><p>For further details on how the <code class="literal">Upgrade Controller</code> works, see "How does the Upgrade Controller work?" (<a class="xref" href="components-upgrade-controller.html#components-upgrade-controller-how" title="20.3. How does the Upgrade Controller work?">Section 20.3, “How does the Upgrade Controller work?”</a>).</p><p>For known limitations that the <code class="literal">Upgrade Controller</code> has, see the Known Limitations (<a class="xref" href="components-upgrade-controller.html#components-upgrade-controller-known-issues" title="20.6. Known Limitations">Section 20.6, “Known Limitations”</a>) section.</p></section><section class="sect1" id="components-upgrade-controller-installation" data-id-title="Installing the Upgrade Controller"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">20.2 </span><span class="title-name">Installing the Upgrade Controller</span></span> <a title="Permalink" class="permalink" href="components-upgrade-controller.html#components-upgrade-controller-installation">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><section class="sect2" id="id-prerequisites-6" data-id-title="Prerequisites"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">20.2.1 </span><span class="title-name">Prerequisites</span></span> <a title="Permalink" class="permalink" href="components-upgrade-controller.html#id-prerequisites-6">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><a class="link" href="https://helm.sh/docs/intro/install/" target="_blank">Helm</a></p></li><li class="listitem"><p><a class="link" href="https://cert-manager.io/v1.14-docs/installation/helm/#installing-with-helm" target="_blank">cert-manager</a></p></li><li class="listitem"><p>System Upgrade Controller (<a class="xref" href="components-system-upgrade-controller.html#components-system-upgrade-controller-install" title="19.2. Installing the System Upgrade Controller">Section 19.2, “Installing the System Upgrade Controller”</a>)</p></li><li class="listitem"><p>A Kubernetes cluster; either K3s or RKE2</p></li></ul></div></section><section class="sect2" id="id-steps" data-id-title="Steps"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">20.2.2 </span><span class="title-name">Steps</span></span> <a title="Permalink" class="permalink" href="components-upgrade-controller.html#id-steps">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Install the <code class="literal">Upgrade Controller</code> Helm chart on your <span class="strong"><strong>management</strong></span> cluster:</p><div class="verbatim-wrap highlight bash"><pre class="screen">helm install upgrade-controller oci://registry.suse.com/edge/3.1/upgrade-controller-chart --version 0.1.0 --create-namespace --namespace upgrade-controller-system</pre></div></li><li class="listitem"><p>Validate the <code class="literal">Upgrade Controller</code> deployment:</p><div class="verbatim-wrap highlight bash"><pre class="screen">kubectl get deployment -n upgrade-controller-system</pre></div></li><li class="listitem"><p>Validate the <code class="literal">Upgrade Controller</code> pod:</p><div class="verbatim-wrap highlight bash"><pre class="screen">kubectl get pods -n upgrade-controller-system</pre></div></li><li class="listitem"><p>Validate the <code class="literal">Upgrade Controller</code> pod logs:</p><div class="verbatim-wrap highlight bash"><pre class="screen">kubectl logs &lt;pod_name&gt; -n upgrade-controller-system</pre></div></li></ol></div></section></section><section class="sect1" id="components-upgrade-controller-how" data-id-title="How does the Upgrade Controller work?"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">20.3 </span><span class="title-name">How does the Upgrade Controller work?</span></span> <a title="Permalink" class="permalink" href="components-upgrade-controller.html#components-upgrade-controller-how">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>In order to perform an Edge release upgrade, the <span class="strong"><strong>Upgrade Controller</strong></span> introduces <code class="literal">two</code> new Kubernetes <a class="link" href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/" target="_blank">custom resources</a>:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>UpgradePlan (<a class="xref" href="components-upgrade-controller.html#components-upgrade-controller-extensions-upgrade-plan" title="20.4.1. UpgradePlan">Section 20.4.1, “UpgradePlan”</a>) - <code class="literal">created by the user</code>; holds configurations regarding an Edge release upgrade.</p></li><li class="listitem"><p>ReleaseManifest (<a class="xref" href="components-upgrade-controller.html#components-upgrade-controller-extensions-release-manifest" title="20.4.2. ReleaseManifest">Section 20.4.2, “ReleaseManifest”</a>) - <code class="literal">created by the Upgrade Controller</code>; holds component versions specific to a particular Edge release version. <span class="strong"><strong>Must not be edited by users.</strong></span></p></li></ul></div><p>The <span class="strong"><strong>Upgrade Controller</strong></span> proceeds to create a <code class="literal">ReleaseManifest</code> resource that holds the component data for the Edge release version specified by the user under the <code class="literal">releaseVersion</code> property in the <code class="literal">UpgradePlan</code> resource.</p><p>Using the component data from the <code class="literal">ReleaseManifest</code>, the <span class="strong"><strong>Upgrade Controller</strong></span> proceeds to upgrade the Edge release components in the following order:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Operating System (OS) (<a class="xref" href="components-upgrade-controller.html#components-upgrade-controller-how-os" title="20.3.1. Operating System upgrade">Section 20.3.1, “Operating System upgrade”</a>).</p></li><li class="listitem"><p>Kubernetes (<a class="xref" href="components-upgrade-controller.html#components-upgrade-controller-how-k8s" title="20.3.2. Kubernetes upgrade">Section 20.3.2, “Kubernetes upgrade”</a>).</p></li><li class="listitem"><p>Additional components (<a class="xref" href="components-upgrade-controller.html#components-upgrade-controller-how-additional" title="20.3.3. Additional components upgrades">Section 20.3.3, “Additional components upgrades”</a>).</p></li></ol></div><div id="id-1.4.19.6.7" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>During the upgrade process, the <span class="strong"><strong>Upgrade Controller</strong></span> constantly outputs upgrade information to the created <code class="literal">UpgradePlan</code>. For more information on how to track the upgrade process, see Tracking the upgrade process (<a class="xref" href="components-upgrade-controller.html#components-upgrade-controller-how-track" title="20.5. Tracking the upgrade process">Section 20.5, “Tracking the upgrade process”</a>).</p></div><section class="sect2" id="components-upgrade-controller-how-os" data-id-title="Operating System upgrade"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">20.3.1 </span><span class="title-name">Operating System upgrade</span></span> <a title="Permalink" class="permalink" href="components-upgrade-controller.html#components-upgrade-controller-how-os">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>To upgrade the <span class="strong"><strong>OS</strong></span> component, the <span class="strong"><strong>Upgrade Controller</strong></span> creates SUC (<a class="xref" href="components-system-upgrade-controller.html" title="Chapter 19. System Upgrade Controller">Chapter 19, <em>System Upgrade Controller</em></a>) Plans that have the following naming template:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>For SUC Plans related to <code class="literal">control-plane</code> node OS upgrades - <code class="literal">control-plane-&lt;os-name&gt;-&lt;os-version&gt;-&lt;suffix&gt;</code>.</p></li><li class="listitem"><p>For SUC Plans related to <code class="literal">worker</code> node OS upgrades - <code class="literal">workers-&lt;os-name&gt;-&lt;os-version&gt;-&lt;suffix&gt;</code>.</p></li></ul></div><p>Based on these plans, <span class="strong"><strong>SUC</strong></span> proceeds to create <span class="strong"><strong>workloads</strong></span> on each node of the cluster that perform the actual OS upgrade.</p><p>Depending on the <code class="literal">ReleaseManifest</code>, the <span class="strong"><strong>OS</strong></span> upgrade may include:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><code class="literal">Package only updates</code> - for use-cases where the OS version does not change between Edge releases.</p></li><li class="listitem"><p><code class="literal">Full OS migration</code> - for use-cases where the OS version changes between Edge releases.</p></li></ul></div><p>The upgrade is executed <span class="strong"><strong>one</strong></span> node at a time starting with the <code class="literal">control-plane</code> nodes first. Only if the <code class="literal">control-plane</code> node upgrade finishes, will the <code class="literal">worker</code> nodes begin to be upgraded.</p><div id="id-1.4.19.6.8.8" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>The <span class="strong"><strong>Upgrade Controller</strong></span> configures the <code class="literal">OS SUC Plans</code> to do <a class="link" href="https://kubernetes.io/docs/reference/kubectl/generated/kubectl_drain/" target="_blank">drain</a> of the cluster nodes if the cluster has more than <span class="strong"><strong>one</strong></span> node of the specific type.</p><p>For clusters where the <code class="literal">control-plane</code> nodes are <span class="strong"><strong>greater than</strong></span> one and there is <span class="strong"><strong>only one</strong></span> worker node, <code class="literal">drain</code> will be performed only for the <code class="literal">control-plane</code> nodes and vice versa.</p><p>For information on how to disable node drains altogether, see the UpgradePlan (<a class="xref" href="components-upgrade-controller.html#components-upgrade-controller-extensions-upgrade-plan" title="20.4.1. UpgradePlan">Section 20.4.1, “UpgradePlan”</a>) section.</p></div></section><section class="sect2" id="components-upgrade-controller-how-k8s" data-id-title="Kubernetes upgrade"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">20.3.2 </span><span class="title-name">Kubernetes upgrade</span></span> <a title="Permalink" class="permalink" href="components-upgrade-controller.html#components-upgrade-controller-how-k8s">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>To upgrade the <span class="strong"><strong>Kubernetes distribution</strong></span> of a cluster, the <span class="strong"><strong>Upgrade Controller</strong></span> creates SUC (<a class="xref" href="components-system-upgrade-controller.html" title="Chapter 19. System Upgrade Controller">Chapter 19, <em>System Upgrade Controller</em></a>) Plans that have the following naming template:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>For SUC Plans related to <code class="literal">control-plane</code> node Kubernetes upgrades - <code class="literal">control-plane-&lt;k8s-version&gt;-&lt;suffix&gt;</code>.</p></li><li class="listitem"><p>For SUC Plans related to <code class="literal">worker</code> node Kubernetes upgrades - <code class="literal">workers-&lt;k8s-version&gt;-&lt;suffix&gt;</code>.</p></li></ul></div><p>Based on these plans, <span class="strong"><strong>SUC</strong></span> proceeds to create <span class="strong"><strong>workloads</strong></span> on each node of the cluster that perform the actual Kubernetes upgrade.</p><p>The <span class="strong"><strong>Kubernetes</strong></span> upgrade will happen <span class="strong"><strong>one</strong></span> node at a time starting with the <code class="literal">control-plane</code> nodes first. Only if the <code class="literal">control-plane</code> node upgrade finishes, will the <code class="literal">worker</code> nodes begin to be upgraded.</p><div id="id-1.4.19.6.9.6" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>The <span class="strong"><strong>Upgrade Controller</strong></span> configures the <code class="literal">Kubernetes SUC Plans</code> to do <a class="link" href="https://kubernetes.io/docs/reference/kubectl/generated/kubectl_drain/" target="_blank">drain</a> of the cluster nodes if the cluster has more than <span class="strong"><strong>one</strong></span> node of the specific type.</p><p>For clusters where the <code class="literal">control-plane</code> nodes are <span class="strong"><strong>greater than</strong></span> one and there is <span class="strong"><strong>only one</strong></span> worker node, <code class="literal">drain</code> will be performed only for the <code class="literal">control-plane</code> nodes and vice versa.</p><p>For information on how to disable node drains altogether, see the UpgradePlan (<a class="xref" href="components-upgrade-controller.html#components-upgrade-controller-extensions-upgrade-plan" title="20.4.1. UpgradePlan">Section 20.4.1, “UpgradePlan”</a>) section.</p></div></section><section class="sect2" id="components-upgrade-controller-how-additional" data-id-title="Additional components upgrades"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">20.3.3 </span><span class="title-name">Additional components upgrades</span></span> <a title="Permalink" class="permalink" href="components-upgrade-controller.html#components-upgrade-controller-how-additional">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>Currently, all additional components are installed via Helm charts. For a full list of the components for a specific release, refer to the Release Notes (<a class="xref" href="id-release-notes.html#release-notes" title="35.1. Abstract">Section 35.1, “Abstract”</a>).</p><p>For Helm charts deployed through EIB (<a class="xref" href="components-eib.html" title="Chapter 9. Edge Image Builder">Chapter 9, <em>Edge Image Builder</em></a>), the <span class="strong"><strong>Upgrade Controller</strong></span> updates the existing <a class="link" href="https://docs.rke2.io/helm#using-the-helm-crd" target="_blank">HelmChart CR</a> of each component.</p><p>For Helm charts deployed outside of EIB, the <span class="strong"><strong>Upgrade Controller</strong></span> creates a <code class="literal">HelmChart</code> resource for each component.</p><p>After the <code class="literal">creation/update</code> of the <code class="literal">HelmChart</code> resource, the <span class="strong"><strong>Upgrade Controller</strong></span> relies on the <a class="link" href="https://github.com/k3s-io/helm-controller/" target="_blank">helm-controller</a> to pick up this change and proceed with the actual component upgrade.</p><p>Charts will be upgraded sequentially based on their order in the <code class="literal">ReleaseManifest</code>. Additional values can also be passed through the <code class="literal">UpgradePlan</code>. For more information about this, refer to the UpgradePlan (<a class="xref" href="components-upgrade-controller.html#components-upgrade-controller-extensions-upgrade-plan" title="20.4.1. UpgradePlan">Section 20.4.1, “UpgradePlan”</a>) section.</p></section></section><section class="sect1" id="components-upgrade-controller-extensions" data-id-title="Kubernetes API extensions"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">20.4 </span><span class="title-name">Kubernetes API extensions</span></span> <a title="Permalink" class="permalink" href="components-upgrade-controller.html#components-upgrade-controller-extensions">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>Extensions to the Kubernetes API introduced by the <span class="strong"><strong>Upgrade Controller</strong></span>.</p><section class="sect2" id="components-upgrade-controller-extensions-upgrade-plan" data-id-title="UpgradePlan"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">20.4.1 </span><span class="title-name">UpgradePlan</span></span> <a title="Permalink" class="permalink" href="components-upgrade-controller.html#components-upgrade-controller-extensions-upgrade-plan">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>The <code class="literal">Upgrade Controller</code> introduces a new Kubernetes <a class="link" href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/" target="_blank">custom resource</a> called an <code class="literal">UpgradePlan</code>.</p><p>The <code class="literal">UpgradePlan</code> serves as an instruction mechanism for the <code class="literal">Upgrade Controller</code> and it supports the following configurations:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><code class="literal">releaseVersion</code> - Edge release version to which the cluster should be upgraded to. The release version must follow <a class="link" href="https://semver.org" target="_blank">semantic</a> versioning and should be retrieved from the Release Notes (<a class="xref" href="id-release-notes.html#release-notes" title="35.1. Abstract">Section 35.1, “Abstract”</a>).</p></li><li class="listitem"><p><code class="literal">disableDrain</code> - <span class="strong"><strong>Optional</strong></span>; instructs the <span class="strong"><strong>Upgrade Controller</strong></span> on whether to disable node <a class="link" href="https://kubernetes.io/docs/reference/kubectl/generated/kubectl_drain/" target="_blank">drains</a>. Useful for when you have workloads with <a class="link" href="https://kubernetes.io/docs/tasks/run-application/configure-pdb/" target="_blank">Disruption Budgets</a>.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Example for <code class="literal">control-plane</code> node drain disablement:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">spec:
  disableDrain:
    controlPlane: true</pre></div></li><li class="listitem"><p>Example for <code class="literal">control-plane</code> and <code class="literal">worker</code> node drain disablement:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">spec:
  disableDrain:
    controlPlane: true
    worker: true</pre></div></li></ul></div></li><li class="listitem"><p><code class="literal">helm</code> - <span class="strong"><strong>Optional</strong></span>; specifies additional values for components installed via Helm.</p><div id="id-1.4.19.7.3.4.3.2" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning</div><p>It is only advised to use this field for values that are critical for upgrades. Standard chart value updates should be performed after the respective charts have been upgraded to the next version.</p></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Example:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">spec:
  helm:
  - chart: foo
    values:
      bar: baz</pre></div></li></ul></div></li></ul></div></section><section class="sect2" id="components-upgrade-controller-extensions-release-manifest" data-id-title="ReleaseManifest"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">20.4.2 </span><span class="title-name">ReleaseManifest</span></span> <a title="Permalink" class="permalink" href="components-upgrade-controller.html#components-upgrade-controller-extensions-release-manifest">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>The <code class="literal">Upgrade Controller</code> introduces a new Kubernetes <a class="link" href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/" target="_blank">custom resource</a> called a <code class="literal">ReleaseManifest</code>.</p><p>The <code class="literal">ReleaseManifest</code> is created by the <code class="literal">Upgrade Controller</code> and holds component data for <span class="strong"><strong>one</strong></span> specific Edge release version. This means that each Edge release version upgrade will be represented by a different <code class="literal">ReleaseManifest</code> resource.</p><div id="id-1.4.19.7.4.4" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning</div><p>The <code class="literal">ReleaseManifest</code> should always be created by the <code class="literal">Upgrade Controller</code>.</p><p>It is not advisable to manually create or edit the <code class="literal">ReleaseManifest</code>. Users that decide to do so, should do this <span class="strong"><strong>at their own risk</strong></span>.</p></div><p>Component data that the <code class="literal">ReleaseManifest</code> ships include, but is not limited to:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><code class="literal">Operating System data</code> (version, supported architectures, additional upgrade data, etc.).</p></li><li class="listitem"><p><code class="literal">Kubernetes distribution data</code> (<a class="link" href="https://docs.rke2.io" target="_blank">RKE2</a>/<a class="link" href="https://k3s.io" target="_blank">K3s</a> supported versions).</p></li><li class="listitem"><p><code class="literal">Additional components data</code> - SUSE Helm chart data (location, version, name, etc.).</p></li></ul></div><p>For an example of how a <code class="literal">ReleaseManifest</code> can look, refer to the <a class="link" href="https://github.com/suse-edge/upgrade-controller/blob/main/config/samples/lifecycle_v1alpha1_releasemanifest.yaml" target="_blank">upstream</a> documentation. <span class="emphasis"><em>Please note that this is just an example and it is not intended to be created as a valid <code class="literal">ReleaseManifest</code> resource.</em></span></p></section></section><section class="sect1" id="components-upgrade-controller-how-track" data-id-title="Tracking the upgrade process"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">20.5 </span><span class="title-name">Tracking the upgrade process</span></span> <a title="Permalink" class="permalink" href="components-upgrade-controller.html#components-upgrade-controller-how-track">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>This section serves as means to track and debug the <code class="literal">upgrade process</code> that the <code class="literal">Upgrade Controller</code> initiates once the user creates an <code class="literal">UpgradePlan</code>.</p><section class="sect2" id="components-upgrade-controller-how-track-general" data-id-title="General"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">20.5.1 </span><span class="title-name">General</span></span> <a title="Permalink" class="permalink" href="components-upgrade-controller.html#components-upgrade-controller-how-track-general">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>General information about the state of the <code class="literal">upgrade process</code> can be viewed in the <code class="literal">UpgradePlan’s</code> status conditions.</p><p>The <code class="literal">UpgradePlan</code> resource’s status can be viewed in the following way:</p><div class="verbatim-wrap highlight bash"><pre class="screen">kubectl get upgradeplan &lt;upgradeplan_name&gt; -n upgrade-controller-system -o yaml</pre></div><p><span class="formalpara-title">Running <code class="literal">UpgradePlan</code> example:</span>
</p><div class="verbatim-wrap highlight yaml"><pre class="screen">apiVersion: lifecycle.suse.com/v1alpha1
kind: UpgradePlan
metadata:
  name: upgrade-plan-mgmt-3-1-0
  namespace: upgrade-controller-system
spec:
  releaseVersion: 3.1.0
status:
  conditions:
  - lastTransitionTime: "2024-10-01T06:26:27Z"
    message: Control plane nodes are being upgraded
    reason: InProgress
    status: "False"
    type: OSUpgraded
  - lastTransitionTime: "2024-10-01T06:26:27Z"
    message: Kubernetes upgrade is not yet started
    reason: Pending
    status: Unknown
    type: KubernetesUpgraded
  - lastTransitionTime: "2024-10-01T06:26:27Z"
    message: Rancher upgrade is not yet started
    reason: Pending
    status: Unknown
    type: RancherUpgraded
  - lastTransitionTime: "2024-10-01T06:26:27Z"
    message: Longhorn upgrade is not yet started
    reason: Pending
    status: Unknown
    type: LonghornUpgraded
  - lastTransitionTime: "2024-10-01T06:26:27Z"
    message: MetalLB upgrade is not yet started
    reason: Pending
    status: Unknown
    type: MetalLBUpgraded
  - lastTransitionTime: "2024-10-01T06:26:27Z"
    message: CDI upgrade is not yet started
    reason: Pending
    status: Unknown
    type: CDIUpgraded
  - lastTransitionTime: "2024-10-01T06:26:27Z"
    message: KubeVirt upgrade is not yet started
    reason: Pending
    status: Unknown
    type: KubeVirtUpgraded
  - lastTransitionTime: "2024-10-01T06:26:27Z"
    message: NeuVector upgrade is not yet started
    reason: Pending
    status: Unknown
    type: NeuVectorUpgraded
  - lastTransitionTime: "2024-10-01T06:26:27Z"
    message: EndpointCopierOperator upgrade is not yet started
    reason: Pending
    status: Unknown
    type: EndpointCopierOperatorUpgraded
  - lastTransitionTime: "2024-10-01T06:26:27Z"
    message: Elemental upgrade is not yet started
    reason: Pending
    status: Unknown
    type: ElementalUpgraded
  - lastTransitionTime: "2024-10-01T06:26:27Z"
    message: SRIOV upgrade is not yet started
    reason: Pending
    status: Unknown
    type: SRIOVUpgraded
  - lastTransitionTime: "2024-10-01T06:26:27Z"
    message: Akri upgrade is not yet started
    reason: Pending
    status: Unknown
    type: AkriUpgraded
  - lastTransitionTime: "2024-10-01T06:26:27Z"
    message: Metal3 upgrade is not yet started
    reason: Pending
    status: Unknown
    type: Metal3Upgraded
  - lastTransitionTime: "2024-10-01T06:26:27Z"
    message: RancherTurtles upgrade is not yet started
    reason: Pending
    status: Unknown
    type: RancherTurtlesUpgraded
  observedGeneration: 1
  sucNameSuffix: 90315a2b6d</pre></div><p>
</p><p>Here you can view every component that the <code class="literal">Upgrade Controller</code> will try to schedule an upgrade for. Each condition follows the below template:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><code class="literal">lastTransitionTime</code> - the last time that this component condition has transitioned from one status to another.</p></li><li class="listitem"><p><code class="literal">message</code> - message that indicates the current upgrade state of the specific component condition.</p></li><li class="listitem"><p><code class="literal">reason</code> - the current upgrade state of the specific component condition. Possible <code class="literal">reasons</code> include:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><code class="literal">Succeeded</code> - upgrade of the specific component is successful.</p></li><li class="listitem"><p><code class="literal">Failed</code> - upgrade of the specific component has failed.</p></li><li class="listitem"><p><code class="literal">InProgress</code> - upgrade of the specific component is currently in progress.</p></li><li class="listitem"><p><code class="literal">Pending</code> - upgrade of the specific component is not yet scheduled.</p></li><li class="listitem"><p><code class="literal">Skipped</code> - specific component is not found on the cluster, so its upgrade will be skipped.</p></li><li class="listitem"><p><code class="literal">Error</code> - specific component has encountered a transient error.</p></li></ul></div></li><li class="listitem"><p><code class="literal">status</code> - status of the current condition <code class="literal">type</code>, one of <code class="literal">True, False, Unknown</code>.</p></li><li class="listitem"><p><code class="literal">type</code> - indicator for the currently upgraded component.</p></li></ul></div><p>The <code class="literal">Upgrade Controller</code> creates <code class="literal">SUC Plans</code> for component conditions of type <span class="emphasis"><em>"OSUpgraded"</em></span> and <span class="emphasis"><em>"KubernetesUpgraded"</em></span>. To further track the <span class="strong"><strong>SUC Plans</strong></span> created for these components, refer to the Monitoring System Upgrade Controller Plans (<a class="xref" href="components-system-upgrade-controller.html#components-system-upgrade-controller-monitor-plans" title="19.3. Monitoring System Upgrade Controller Plans">Section 19.3, “Monitoring System Upgrade Controller Plans”</a>) section.</p><p>All other component condition types can be further tracked by viewing the resources created for them by the <a class="link" href="https://github.com/k3s-io/helm-controller/" target="_blank">helm-controller</a>. For more information, see the
Helm Controller (<a class="xref" href="components-upgrade-controller.html#components-upgrade-controller-how-track-helm" title="20.5.2. Helm Controller">Section 20.5.2, “Helm Controller”</a>) section.</p><p>An <code class="literal">UpgradePlan</code> scheduled by the <code class="literal">Upgrade Controller</code> can be marked as <code class="literal">successful</code> once:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>There are no <code class="literal">Pending</code> or <code class="literal">InProgress</code> component conditions.</p></li><li class="listitem"><p>The <code class="literal">lastSuccessfulReleaseVersion</code> property points to the <code class="literal">releaseVersion</code> that is specified in the <code class="literal">UpgradePlan’s</code> configuration. <span class="emphasis"><em>This property is added to the <code class="literal">UpgradePlan’s</code> status by the <code class="literal">Upgrade Controller</code> once the <code class="literal">upgrade process</code> is successful.</em></span></p></li></ol></div><p><span class="formalpara-title">Successful <code class="literal">UpgradePlan</code> example:</span>
</p><div class="verbatim-wrap highlight yaml"><pre class="screen">apiVersion: lifecycle.suse.com/v1alpha1
kind: UpgradePlan
metadata:
  name: upgrade-plan-mgmt-3-1-0
  namespace: upgrade-controller-system
spec:
  releaseVersion: 3.1.0
status:
  conditions:
  - lastTransitionTime: "2024-10-01T06:26:48Z"
    message: All cluster nodes are upgraded
    reason: Succeeded
    status: "True"
    type: OSUpgraded
  - lastTransitionTime: "2024-10-01T06:26:59Z"
    message: All cluster nodes are upgraded
    reason: Succeeded
    status: "True"
    type: KubernetesUpgraded
  - lastTransitionTime: "2024-10-01T06:27:13Z"
    message: Chart rancher upgrade succeeded
    reason: Succeeded
    status: "True"
    type: RancherUpgraded
  - lastTransitionTime: "2024-10-01T06:27:13Z"
    message: Chart longhorn is not installed
    reason: Skipped
    status: "False"
    type: LonghornUpgraded
  - lastTransitionTime: "2024-10-01T06:27:13Z"
    message: Specified version of chart metallb is already installed
    reason: Skipped
    status: "False"
    type: MetalLBUpgraded
  - lastTransitionTime: "2024-10-01T06:27:13Z"
    message: Chart cdi is not installed
    reason: Skipped
    status: "False"
    type: CDIUpgraded
  - lastTransitionTime: "2024-10-01T06:27:13Z"
    message: Chart kubevirt is not installed
    reason: Skipped
    status: "False"
    type: KubeVirtUpgraded
  - lastTransitionTime: "2024-10-01T06:27:13Z"
    message: Chart neuvector-crd is not installed
    reason: Skipped
    status: "False"
    type: NeuVectorUpgraded
  - lastTransitionTime: "2024-10-01T06:27:14Z"
    message: Specified version of chart endpoint-copier-operator is already installed
    reason: Skipped
    status: "False"
    type: EndpointCopierOperatorUpgraded
  - lastTransitionTime: "2024-10-01T06:27:14Z"
    message: Chart elemental-operator upgrade succeeded
    reason: Succeeded
    status: "True"
    type: ElementalUpgraded
  - lastTransitionTime: "2024-10-01T06:27:15Z"
    message: Chart sriov-crd is not installed
    reason: Skipped
    status: "False"
    type: SRIOVUpgraded
  - lastTransitionTime: "2024-10-01T06:27:16Z"
    message: Chart akri is not installed
    reason: Skipped
    status: "False"
    type: AkriUpgraded
  - lastTransitionTime: "2024-10-01T06:27:19Z"
    message: Chart metal3 is not installed
    reason: Skipped
    status: "False"
    type: Metal3Upgraded
  - lastTransitionTime: "2024-10-01T06:27:27Z"
    message: Chart rancher-turtles is not installed
    reason: Skipped
    status: "False"
    type: RancherTurtlesUpgraded
  lastSuccessfulReleaseVersion: 3.1.0
  observedGeneration: 1
  sucNameSuffix: 90315a2b6d</pre></div><p>
</p></section><section class="sect2" id="components-upgrade-controller-how-track-helm" data-id-title="Helm Controller"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">20.5.2 </span><span class="title-name">Helm Controller</span></span> <a title="Permalink" class="permalink" href="components-upgrade-controller.html#components-upgrade-controller-how-track-helm">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>This section covers how to track resources created by the <a class="link" href="https://github.com/k3s-io/helm-controller/" target="_blank">helm-controller</a>.</p><div id="id-1.4.19.8.4.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>The below steps assume that <code class="literal">kubectl</code> has been configured to connect to the cluster where the <code class="literal">Upgrade Controller</code> has been deployed to.</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Locate the <code class="literal">HelmChart</code> resource for the specific component:</p><div class="verbatim-wrap highlight bash"><pre class="screen">kubectl get helmcharts -n kube-system</pre></div></li><li class="listitem"><p>Using the name of the <code class="literal">HelmChart</code> resource, locate the upgrade Pod that was created by the <code class="literal">helm-controller</code>:</p><div class="verbatim-wrap highlight bash"><pre class="screen">kubectl get pods -l helmcharts.helm.cattle.io/chart=&lt;helmchart_name&gt; -n kube-system

# Example for Rancher
kubectl get pods -l helmcharts.helm.cattle.io/chart=rancher -n kube-system
NAME                         READY   STATUS      RESTARTS   AGE
helm-install-rancher-tv9wn   0/1     Completed   0          16m</pre></div></li><li class="listitem"><p>View the logs of the component specific pod:</p><div class="verbatim-wrap highlight bash"><pre class="screen">kubectl logs &lt;pod_name&gt; -n kube-system</pre></div></li></ol></div></section></section><section class="sect1" id="components-upgrade-controller-known-issues" data-id-title="Known Limitations"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">20.6 </span><span class="title-name">Known Limitations</span></span> <a title="Permalink" class="permalink" href="components-upgrade-controller.html#components-upgrade-controller-known-issues">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><code class="literal">Downstream</code> cluster upgrades are not yet managed by the <code class="literal">Upgrade Controller</code>. For information on how to upgrade <code class="literal">downstream</code> clusters, refer to the Downstream clusters (<a class="xref" href="day2-downstream-clusters.html" title="Chapter 27. Downstream clusters">Chapter 27, <em>Downstream clusters</em></a>) section.</p></li><li class="listitem"><p>The <code class="literal">Upgrade Controller</code> expects any additional SUSE Edge Helm charts that are deployed through EIB (<a class="xref" href="components-eib.html" title="Chapter 9. Edge Image Builder">Chapter 9, <em>Edge Image Builder</em></a>) to have their <a class="link" href="https://docs.rke2.io/helm#using-the-helm-crd" target="_blank">HelmChart CR</a> deployed in the <code class="literal">kube-system</code> namespace. To do this, configure the <code class="literal">installationNamespace</code> property in your EIB definition file. For more information, see the <a class="link" href="https://github.com/suse-edge/edge-image-builder/blob/main/docs/building-images.md#kubernetes" target="_blank">upstream</a> documentation.</p></li><li class="listitem"><p>Currently the <code class="literal">Upgrade Controller</code> has no way to determine the current running Edge release version on the <code class="literal">management</code> cluster. Ensure to provide an Edge release version that is <span class="strong"><strong>greater</strong></span> than the currently running Edge release version on the cluster.</p></li><li class="listitem"><p>Currently the <code class="literal">Upgrade Controller</code> supports <span class="strong"><strong>non air-gapped</strong></span> environment upgrades only. <span class="strong"><strong>Air-gapped</strong></span> upgrades are not <span class="strong"><strong>yet</strong></span> possible.</p></li></ul></div></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="components-system-upgrade-controller.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 19 </span>System Upgrade Controller</span></a> </div><div><a class="pagination-link next" href="id-how-to-guides.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Part III </span>How-To Guides</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="section"><a href="components-upgrade-controller.html#id-how-does-suse-edge-use-upgrade-controller"><span class="title-number">20.1 </span><span class="title-name">How does SUSE Edge use Upgrade Controller?</span></a></span></li><li><span class="section"><a href="components-upgrade-controller.html#components-upgrade-controller-installation"><span class="title-number">20.2 </span><span class="title-name">Installing the Upgrade Controller</span></a></span></li><li><span class="section"><a href="components-upgrade-controller.html#components-upgrade-controller-how"><span class="title-number">20.3 </span><span class="title-name">How does the Upgrade Controller work?</span></a></span></li><li><span class="section"><a href="components-upgrade-controller.html#components-upgrade-controller-extensions"><span class="title-number">20.4 </span><span class="title-name">Kubernetes API extensions</span></a></span></li><li><span class="section"><a href="components-upgrade-controller.html#components-upgrade-controller-how-track"><span class="title-number">20.5 </span><span class="title-name">Tracking the upgrade process</span></a></span></li><li><span class="section"><a href="components-upgrade-controller.html#components-upgrade-controller-known-issues"><span class="title-number">20.6 </span><span class="title-name">Known Limitations</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>