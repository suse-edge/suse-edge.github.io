<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SUSE Edge Documentation | Standalone clusters with Edge Image Builder</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Standalone clusters with Edge Image Builder"/>
<meta name="description" content="Edge Image Builder (EIB) is a tool that streamlines the process of generating preconfigured, ready-to-deploy (RTD) disk images for bootstrapping mach…"/>
<meta name="book-title" content="SUSE Edge Documentation"/>
<meta name="chapter-title" content="Chapter 3. Standalone clusters with Edge Image Builder"/>
<meta name="tracker-url" content="https://github.com/suse-edge/suse-edge.github.io/issues/new"/>
<meta name="tracker-type" content="gh"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Standalone clusters with Edge Image Builder"/>
<meta property="og:description" content="Edge Image Builder (EIB) is a tool that streamlines the pro…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Standalone clusters with Edge Image Builder"/>
<meta name="twitter:description" content="Edge Image Builder (EIB) is a tool that streamlines the pro…"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
    "inLanguage": "en",
    

    "headline": "Standalone clusters with Edge Image Builder",
  
    "description": "Standalone clusters with Edge Image Builder",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-04-25T00:00+02:00",
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="quickstart-elemental.html" title="Chapter 2. Remote host onboarding with Elemental"/><link rel="next" href="id-components-used-2.html" title="Part II. Components Used"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="wide offline js-off"><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">SUSE Edge Documentation</a><span> / </span><a class="crumb" href="id-quick-starts.html">Quick Starts</a><span> / </span><a class="crumb" href="quickstart-eib.html">Standalone clusters with Edge Image Builder</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">SUSE Edge Documentation</div><ol><li><a href="id-suse-edge-documentation.html" class=" "><span class="title-number"> </span><span class="title-name">SUSE Edge Documentation</span></a></li><li class="active"><a href="id-quick-starts.html" class="has-children you-are-here"><span class="title-number">I </span><span class="title-name">Quick Starts</span></a><ol><li><a href="quickstart-metal3.html" class=" "><span class="title-number">1 </span><span class="title-name">BMC automated deployments with Metal<sup>3</sup></span></a></li><li><a href="quickstart-elemental.html" class=" "><span class="title-number">2 </span><span class="title-name">Remote host onboarding with Elemental</span></a></li><li><a href="quickstart-eib.html" class=" you-are-here"><span class="title-number">3 </span><span class="title-name">Standalone clusters with Edge Image Builder</span></a></li></ol></li><li><a href="id-components-used-2.html" class="has-children "><span class="title-number">II </span><span class="title-name">Components Used</span></a><ol><li><a href="components-rancher.html" class=" "><span class="title-number">4 </span><span class="title-name">Rancher</span></a></li><li><a href="components-fleet.html" class=" "><span class="title-number">5 </span><span class="title-name">Fleet</span></a></li><li><a href="components-slmicro.html" class=" "><span class="title-number">6 </span><span class="title-name">SLE Micro</span></a></li><li><a href="components-metal3.html" class=" "><span class="title-number">7 </span><span class="title-name">Metal<sup>3</sup></span></a></li><li><a href="components-eib.html" class=" "><span class="title-number">8 </span><span class="title-name">Edge Image Builder</span></a></li><li><a href="components-elemental.html" class=" "><span class="title-number">9 </span><span class="title-name">Elemental</span></a></li><li><a href="components-k3s.html" class=" "><span class="title-number">10 </span><span class="title-name">K3s</span></a></li><li><a href="components-rke2.html" class=" "><span class="title-number">11 </span><span class="title-name">RKE2</span></a></li><li><a href="components-longhorn.html" class=" "><span class="title-number">12 </span><span class="title-name">Longhorn</span></a></li><li><a href="components-neuvector.html" class=" "><span class="title-number">13 </span><span class="title-name">NeuVector</span></a></li><li><a href="components-metallb.html" class=" "><span class="title-number">14 </span><span class="title-name">MetalLB</span></a></li><li><a href="components-kubevirt.html" class=" "><span class="title-number">15 </span><span class="title-name">Edge Virtualization</span></a></li></ol></li><li><a href="id-how-to-guides.html" class="has-children "><span class="title-number">III </span><span class="title-name">How-To Guides</span></a><ol><li><a href="guides-metallb-k3s.html" class=" "><span class="title-number">16 </span><span class="title-name">MetalLB on K3s (using L2)</span></a></li><li><a href="guides-metallb-kubernetes.html" class=" "><span class="title-number">17 </span><span class="title-name">MetalLB in front of the Kubernetes API server</span></a></li></ol></li><li><a href="id-third-party-integration.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Third-Party Integration</span></a><ol><li><a href="integrations-nats.html" class=" "><span class="title-number">18 </span><span class="title-name">NATS</span></a></li><li><a href="id-nvidia-gpus-on-sle-micro.html" class=" "><span class="title-number">19 </span><span class="title-name">NVIDIA GPUs on SLE Micro</span></a></li></ol></li><li><a href="id-product-documentation.html" class="has-children "><span class="title-number">V </span><span class="title-name">Product Documentation</span></a><ol><li><a href="atip.html" class=" "><span class="title-number">20 </span><span class="title-name">SUSE Adaptive Telco Infrastructure Platform (ATIP)</span></a></li><li><a href="atip-architecture.html" class=" "><span class="title-number">21 </span><span class="title-name">Concept &amp; Architecture</span></a></li><li><a href="atip-requirements.html" class=" "><span class="title-number">22 </span><span class="title-name">Requirements &amp; Assumptions</span></a></li><li><a href="atip-management-cluster.html" class=" "><span class="title-number">23 </span><span class="title-name">Setting up the management cluster</span></a></li><li><a href="atip-features.html" class=" "><span class="title-number">24 </span><span class="title-name">Telco features configuration</span></a></li><li><a href="atip-automated-provisioning.html" class=" "><span class="title-number">25 </span><span class="title-name">Automated provisioning with ZTP</span></a></li><li><a href="atip-lifecycle.html" class=" "><span class="title-number">26 </span><span class="title-name">Lifecycle actions</span></a></li></ol></li><li><a href="id-appendix.html" class=" "><span class="title-number">A </span><span class="title-name">Appendix</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="quickstart-eib" data-id-title="Standalone clusters with Edge Image Builder"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">3 </span><span class="title-name">Standalone clusters with Edge Image Builder</span></span> <a title="Permalink" class="permalink" href="quickstart-eib.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>Edge Image Builder (EIB) is a tool that streamlines the process of generating preconfigured, ready-to-deploy (RTD) disk images for bootstrapping machines, even in air-gapped scenarios.</p><p>For more information, read the Edge Image Builder Introduction (<a class="xref" href="components-eib.html" title="Chapter 8. Edge Image Builder">Chapter 8, <em>Edge Image Builder</em></a>).</p><section class="sect1" id="id-prerequisites-2" data-id-title="Prerequisites"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.1 </span><span class="title-name">Prerequisites</span></span> <a title="Permalink" class="permalink" href="quickstart-eib.html#id-prerequisites-2">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>x86_64 machine to run EIB</p></li><li class="listitem"><p>Podman or alternative container runtime</p></li><li class="listitem"><p>Local copy of <code class="literal">SLE-Micro.x86_64-5.5.0-Default-SelfInstall-GM2.install.iso</code> found <a class="link" href="https://www.suse.com/download/sle-micro/" target="_blank">here</a></p></li></ul></div><div id="id-1.3.5.4.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>If you are running Rancher Desktop, you need to switch to the <a class="link" href="https://docs.rancherdesktop.io/ui/preferences/container-engine/general" target="_blank"><code class="literal">dockerd (moby)</code> container runtime</a>.</p></div><section class="sect2" id="id-getting-the-eib-image" data-id-title="Getting the EIB Image"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.1.1 </span><span class="title-name">Getting the EIB Image</span></span> <a title="Permalink" class="permalink" href="quickstart-eib.html#id-getting-the-eib-image">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><div class="verbatim-wrap"><pre class="screen">podman pull registry.opensuse.org/isv/suse/edge/edgeimagebuilder/containerfile/suse/edge-image-builder:1.0.0.rc3</pre></div></section><section class="sect2" id="id-creating-the-image-configuration-directory" data-id-title="Creating the image configuration directory"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.1.2 </span><span class="title-name">Creating the image configuration directory</span></span> <a title="Permalink" class="permalink" href="quickstart-eib.html#id-creating-the-image-configuration-directory">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>EIB requires mounting a directory from the host.</p><p>This directory must follow a specific structure. The following instructions outline a non-comprehensive example:</p><p>For simplicity, we recommend setting the variable <code class="literal">$EIB</code> to the full path of where you want the configuration directory, for example, <code class="literal">EIB=/home/user/eib/config</code>.</p><div class="verbatim-wrap"><pre class="screen">mkdir -p $EIB/base-images</pre></div><div class="verbatim-wrap"><pre class="screen">cp SLE-Micro.x86_64-5.5.0-Default-SelfInstall-GM2.install.iso $EIB/base-images/slemicro.iso</pre></div><p>The generated directory should look like:</p><div class="verbatim-wrap"><pre class="screen">└── base-images/
    └ slemicro.iso</pre></div></section><section class="sect2" id="id-building-the-image-definition-file" data-id-title="Building the image definition file"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.1.3 </span><span class="title-name">Building the image definition file</span></span> <a title="Permalink" class="permalink" href="quickstart-eib.html#id-building-the-image-definition-file">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>The definition file declaratively defines the desired configuration of the RTD image.</p><p>The following is the base content of the definition file that we will name <code class="literal">eib-iso-definition.yaml</code>:</p><div class="verbatim-wrap"><pre class="screen">cat &lt;&lt; EOF &gt; $EIB/eib-iso-definition.yaml
apiVersion: 1.0
image:
  imageType: iso
  arch: x86_64
  baseImage: slemicro.iso
  outputImageName: eib-image.iso
EOF</pre></div><p>This definition specifies generating an image for an <code class="literal">x86_64</code> system. The base image to be modified is an <code class="literal">ISO</code> image named <code class="literal">slemicro.iso</code>, expected to be located at <code class="literal">$EIB/base-images/slemicro.iso</code>. It also outlines that after EIB finishes modifying the image, the RTD image will be named <code class="literal">eib-image.iso</code>.</p><p>Now our directory structure should look like:</p><div class="verbatim-wrap"><pre class="screen">├── eib-iso-definition.yaml
├── base-images/
└── └ slemicro.iso</pre></div><section class="sect3" id="id-configuring-os-users" data-id-title="Configuring OS Users"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">3.1.3.1 </span><span class="title-name">Configuring OS Users</span></span> <a title="Permalink" class="permalink" href="quickstart-eib.html#id-configuring-os-users">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>EIB allows us to preconfigure users with login information, such as passwords or SSH keys. (Doing this for root is not recommended but we will use root for this guide).</p><p>First, create an encrypted password:</p><div class="verbatim-wrap"><pre class="screen">openssl passwd -6 SecurePassword</pre></div><p>This will output something similar to:</p><div class="verbatim-wrap"><pre class="screen">$6$NEi4Y1pauz2Ya9gy$QUBRl/YkPgUyiJ41Iw9Zho7ngoWxbhTQL2U/ahB3b7iXmAOBc1xqw4RabfYs/2SfCo6EWi4Sg8avnczEkDjRk0</pre></div><p>We can then add a section in the definition file called <code class="literal">operatingSystem</code> with a <code class="literal">users</code> array inside it. The resulting file should look like:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">apiVersion: 1.0
image:
  imageType: iso
  arch: x86_64
  baseImage: slemicro.iso
  outputImageName: eib-image.iso
operatingSystem:
  users:
    - username: root
      encryptedPassword: $6$NEi4Y1pauz2Ya9gy$QUBRl/YkPgUyiJ41Iw9Zho7ngoWxbhTQL2U/ahB3b7iXmAOBc1xqw4RabfYs/2SfCo6EWi4Sg8avnczEkDjRk0</pre></div></section><section class="sect3" id="id-configuring-packages" data-id-title="Configuring packages"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">3.1.3.2 </span><span class="title-name">Configuring packages</span></span> <a title="Permalink" class="permalink" href="quickstart-eib.html#id-configuring-packages">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>EIB also allows us to preconfigure our RTD image with packages.</p><p>As an example, to install the <code class="literal">yq</code> package (a package that simplifies working with YAML) found in the PackageHub repository, we can specify the package as part of a package list and also the repository where it can be found:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">  packages:
    packageList:
      - yq
    additionalRepos:
      - url: https://download.opensuse.org/repositories/openSUSE:Factory/standard</pre></div><p>The resulting definition file looks like:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">apiVersion: 1.0
image:
  imageType: iso
  arch: x86_64
  baseImage: slemicro.iso
  outputImageName: eib-image.iso
operatingSystem:
  users:
    - username: root
      encryptedPassword: $6$NEi4Y1pauz2Ya9gy$QUBRl/YkPgUyiJ41Iw9Zho7ngoWxbhTQL2U/ahB3b7iXmAOBc1xqw4RabfYs/2SfCo6EWi4Sg8avnczEkDjRk0
  packages:
    packageList:
      - yq
    additionalRepos:
      - url: https://download.opensuse.org/repositories/openSUSE:Factory/standard</pre></div><p>Given this, the EIB package resolver will automatically search for and download the required RPMs for the package, as well as all the necessary dependencies. This package will then be preinstalled to the RTD image with no network connection necessary.</p><div id="id-1.3.5.4.6.9.8" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>More operating system settings can be found <a class="link" href="https://github.com/suse-edge/edge-image-builder/blob/main/docs/building-images.md#operating-system" target="_blank">here</a> in the Edge Image Builder documentation.</p></div></section><section class="sect3" id="id-configuring-kubernetes-cluster-and-user-workloads" data-id-title="Configuring Kubernetes cluster and user workloads"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">3.1.3.3 </span><span class="title-name">Configuring Kubernetes cluster and user workloads</span></span> <a title="Permalink" class="permalink" href="quickstart-eib.html#id-configuring-kubernetes-cluster-and-user-workloads">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>Another feature of EIB is the simplified air-gapped deployment of a Kubernetes cluster with Helm charts and manifests.</p><p>The following addition to the definition file specifies that a single-node RKE2 Kubernetes cluster using version <code class="literal">v1.28.8+rke2r1</code> should be deployed. It also specifies that version <code class="literal">0.2.2</code> of <code class="literal">kubevirt</code> found in the <code class="literal"><a class="link" href="https://suse-edge.github.io/charts" target="_blank">https://suse-edge.github.io/charts</a></code> repository, and the manifest found at <code class="literal"><a class="link" href="https://k8s.io/examples/application/nginx-app.yaml" target="_blank">https://k8s.io/examples/application/nginx-app.yaml</a></code> should be automatically deployed on the generated RTD image as well.</p><div class="verbatim-wrap highlight yaml"><pre class="screen">kubernetes:
  version: v1.28.8+rke2r1
  manifests:
    urls:
      - https://k8s.io/examples/application/nginx-app.yaml
  helm:
    charts:
      - name: kubevirt
        version: 0.2.2
        repositoryName: suse-edge
    repositories:
      - name: suse-edge
        url: https://suse-edge.github.io/charts</pre></div><p>The resulting full definition file should now look like:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">apiVersion: 1.0
image:
  imageType: iso
  arch: x86_64
  baseImage: slemicro.iso
  outputImageName: eib-image.iso
operatingSystem:
  users:
    - username: root
      encryptedPassword: $6$NEi4Y1pauz2Ya9gy$QUBRl/YkPgUyiJ41Iw9Zho7ngoWxbhTQL2U/ahB3b7iXmAOBc1xqw4RabfYs/2SfCo6EWi4Sg8avnczEkDjRk0
  packages:
    packageList:
      - yq
    additionalRepos:
      - url: https://download.opensuse.org/repositories/openSUSE:Factory/standard
kubernetes:
  version: v1.28.8+rke2r1
  manifests:
    urls:
      - https://k8s.io/examples/application/nginx-app.yaml
  helm:
    charts:
      - name: kubevirt
        version: 0.2.2
        repositoryName: suse-edge
    repositories:
      - name: suse-edge
        url: https://suse-edge.github.io/charts</pre></div><div id="id-1.3.5.4.6.10.7" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>Further examples of options such as multi-node deployments, networking, and Helm chart options/values can be seen <a class="link" href="https://github.com/suse-edge/edge-image-builder/blob/main/docs/building-images.md#kubernetes" target="_blank">here</a> in the Edge Image Builder documentation.</p></div></section><section class="sect3" id="id-configuring-the-network" data-id-title="Configuring the network"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">3.1.3.4 </span><span class="title-name">Configuring the network</span></span> <a title="Permalink" class="permalink" href="quickstart-eib.html#id-configuring-the-network">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><div id="id-1.3.5.4.6.11.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>This example is designed for the <code class="literal">default</code> libvirt network. Other environments may need their own network configuration in order to work.</p></div><p>Lastly, for this quick start example, let us set up a network device.</p><p>First, create the <code class="literal">network</code> directory at <code class="literal">$EIB/network</code>.</p><div class="verbatim-wrap"><pre class="screen">mkdir $EIB/network</pre></div><p>Within the <code class="literal">network</code> directory, create a file named <code class="literal">host1.local.yaml</code> containing the following:</p><div class="verbatim-wrap"><pre class="screen">cat &lt;&lt; EOF &gt; $EIB/network/host1.local.yaml
routes:
  config:
  - destination: 0.0.0.0/0
    metric: 100
    next-hop-address: 192.168.122.1
    next-hop-interface: eth0
    table-id: 254
  - destination: 192.168.122.0/24
    metric: 100
    next-hop-address:
    next-hop-interface: eth0
    table-id: 254
dns-resolver:
  config:
    server:
    - 192.168.122.1
    - 8.8.8.8
interfaces:
- name: eth0
  type: ethernet
  state: up
  mac-address: 34:8A:B1:4B:16:E7
  ipv4:
    address:
    - ip: 192.168.122.50
      prefix-length: 24
    dhcp: false
    enabled: true
  ipv6:
    enabled: false
EOF</pre></div><div id="id-1.3.5.4.6.11.8" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>EIB networking is MAC address-dependent. In the case of virtual machines, you may be able to set the MAC address at boot. For physical machines, you need to know the MAC address ahead of time.</p></div><p>The resulting file structure should look like:</p><div class="verbatim-wrap"><pre class="screen">├── eib-iso-definition.yaml
├── base-images/
│   └ slemicro.iso
└── network/
    └ host1.local.yaml</pre></div><p>This will be turned into the necessary <a class="link" href="https://github.com/nmstate/nmstate" target="_blank">nmstate</a> configuration files when the image is built. These files will be automatically applied during the provisioning of the RTD image, resulting in a complete network configuration.</p></section></section><section class="sect2" id="id-building-the-image" data-id-title="Building the image"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.1.4 </span><span class="title-name">Building the image</span></span> <a title="Permalink" class="permalink" href="quickstart-eib.html#id-building-the-image">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>To build the image, we can run:</p><div class="verbatim-wrap highlight bash"><pre class="screen">podman run --rm -it --privileged -v $EIB:/eib \
registry.opensuse.org/isv/suse/edge/edgeimagebuilder/containerfile/suse/edge-image-builder:1.0.0.rc3 \
build --definition-file eib-iso-definition.yaml</pre></div><p>The output of the command should be similar to:</p><div class="verbatim-wrap"><pre class="screen">Setting up Podman API listener...
Generating image customization components...
Identifier ................... [SUCCESS]
Custom Files ................. [SKIPPED]
Time ......................... [SKIPPED]
Network ...................... [SUCCESS]
Groups ....................... [SKIPPED]
Users ........................ [SUCCESS]
Proxy ........................ [SKIPPED]
Resolving package dependencies...
Rpm .......................... [SUCCESS]
Systemd ...................... [SKIPPED]
Elemental .................... [SKIPPED]
Suma ......................... [SKIPPED]
Downloading file: dl-manifest-1.yaml 100% | (498/498 B, 4.2 MB/s)
Embedded Artifact Registry ... [SUCCESS]
Keymap ....................... [SUCCESS]
Configuring Kubernetes component...
The Kubernetes CNI is not explicitly set, defaulting to 'cilium'.
Downloading file: rke2-images-core.linux-amd64.tar.zst 100% | (780/780 MB, 116 MB/s)
Downloading file: rke2-images-cilium.linux-amd64.tar.zst 100% | (367/367 MB, 32 MB/s)
Downloading file: rke2.linux-amd64.tar.gz 100% | (34/34 MB, 102 MB/s)
Downloading file: sha256sum-amd64.txt 100% | (3.9/3.9 kB, 32 MB/s)
Downloading file: dl-manifest-1.yaml 100% | (498/498 B, 6.8 MB/s)
Kubernetes ................... [SUCCESS]
Certificates ................. [SKIPPED]
Building ISO image...
Kernel Params ................ [SKIPPED]
Image build complete.</pre></div><p>The generated RTD <code class="literal">ISO</code> image will be created at <code class="literal">$EIB/eib-image.iso</code>:</p><div class="verbatim-wrap"><pre class="screen">├── eib-iso-definition.yaml
├── eib-image.iso
├── _build
│   └ build-XYZ
├── base-images/
│   └ slemicro.iso
└── network/</pre></div><p>Each build creates a time-stamped folder in <code class="literal">$EIB/_build/</code> that includes the logs of the build, the artifacts used during the build, and the <code class="literal">combustion</code> directory which contains all the artifacts that are added to the RTD image.</p><p>The contents of this directory should look like:</p><div class="verbatim-wrap"><pre class="screen">├── build-XYZ
├── combustion
│   │   ├── 05-configure-network.sh
│   │   ├── 10-rpm-install.sh
│   │   ├── 12-keymap-setup.sh
│   │   ├── 13b-add-users.sh
│   │   ├── 20-k8s-install.sh
│   │   ├── 26-embedded-registry.sh
│   │   ├── 48-message.sh
│   │   ├── hauler
│   │   ├── kubernetes
│   │   │   ├── images
│   │   │   │   ├── rke2-images-cilium.linux-amd64.tar.zst
│   │   │   │   └── rke2-images-core.linux-amd64.tar.zst
│   │   │   ├── install
│   │   │   │   ├── rke2.linux-amd64.tar.gz
│   │   │   │   └── sha256sum-amd64.txt
│   │   │   └── manifests
│   │   │       ├── dl-manifest-1.yaml
│   │   │       └── kubevirt.yaml
│   │   ├── network
│   │   │   ├── host1.local
│   │   │   │   └── eth0.nmconnection
│   │   │   └── host_config.yaml
│   │   ├── nmc
│   │   ├── registries.yaml
│   │   ├── registry
│   │   │   └── embedded-registry.tar.zst
│   │   ├── rke2_installer.sh
│   │   ├── rpm-repo
│   │   │   ├── addrepo0
│   │   │   │   └── x86_64
│   │   │   │       ├── ...
│   │   │   ├── repodata
│   │   │   │   ├── ...
│   │   │   └── zypper-success
│   │   ├── script
│   │   └── server.yaml
│   ├── createrepo.log
│   ├── eib-build.log
│   ├── embedded-registry.log
│   ├── hauler-manifest.yaml
│   ├── helm
│   │   └── kubevirt-0.2.2.tgz
│   ├── helm-pull.log
│   ├── helm-repo-add.log
│   ├── helm-template.log
│   ├── iso-build.log
│   ├── iso-build.sh
│   ├── iso-extract
│   │   ├── ...
│   ├── iso-extract.log
│   ├── iso-extract.sh
│   ├── modify-raw-image.sh
│   ├── network-config.log
│   ├── podman-image-build.log
│   ├── podman-system-service.log
│   ├── prepare-resolver-base-tarball-image.log
│   ├── prepare-resolver-base-tarball-image.sh
│   ├── raw-build.log
│   ├── raw-extract
│   │   ├── ...
│   └── resolver-image-build
│       ├──...
└── cache
    ├── ...</pre></div><p>If the build fails, <code class="literal">eib-build.log</code> is the first log that contains information. From there, it will direct you to the component that failed for debugging.</p></section><section class="sect2" id="id-debugging-the-image-build-process" data-id-title="Debugging the image build process"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.1.5 </span><span class="title-name">Debugging the image build process</span></span> <a title="Permalink" class="permalink" href="quickstart-eib.html#id-debugging-the-image-build-process">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>If the image build process fails, refer to the <a class="link" href="https://github.com/dbw7/edge-image-builder/blob/main/docs/debugging.md" target="_blank">EIB debugging guide</a>.</p></section><section class="sect2" id="id-testing-your-newly-built-image" data-id-title="Testing your newly built image"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.1.6 </span><span class="title-name">Testing your newly built image</span></span> <a title="Permalink" class="permalink" href="quickstart-eib.html#id-testing-your-newly-built-image">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>For instructions on how to test the newly build RTD image, refer to the <a class="link" href="https://github.com/suse-edge/edge-image-builder/blob/main/docs/testing-guide.md" target="_blank">EIB image testing guide</a>.</p></section></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="quickstart-elemental.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 2 </span>Remote host onboarding with Elemental</span></a> </div><div><a class="pagination-link next" href="id-components-used-2.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Part II </span>Components Used</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="section"><a href="quickstart-eib.html#id-prerequisites-2"><span class="title-number">3.1 </span><span class="title-name">Prerequisites</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>