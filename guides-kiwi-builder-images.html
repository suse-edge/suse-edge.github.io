<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SUSE Edge Documentation | Building Updated SUSE Linux Micro Images with Kiwi</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Building Updated SUSE Linux Micro Images with Kiwi"/>
<meta name="description" content="This section explains how to generate updated SUSE Linux Micro images to be used with Edge Image Builder, with Cluster API (CAPI) + Metal3, or to wri…"/>
<meta name="book-title" content="SUSE Edge Documentation"/>
<meta name="chapter-title" content="Chapter 29. Building Updated SUSE Linux Micro Images with Kiwi"/>
<meta name="tracker-url" content="https://github.com/suse-edge/suse-edge.github.io/issues/new"/>
<meta name="tracker-type" content="gh"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Building Updated SUSE Linux Micro Images with Kiwi"/>
<meta property="og:description" content="This section explains how to generate updated SUSE Linux Mi…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Building Updated SUSE Linux Micro Images with Kiwi"/>
<meta name="twitter:description" content="This section explains how to generate updated SUSE Linux Mi…"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    

    "headline": "Building Updated SUSE Linux Micro Images with Kiwi",
  
    "description": "Building Updated SUSE Linux Micro Images with Kiwi",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="id-air-gapped-deployments-with-edge-image-builder.html" title="Chapter 28. Air-gapped deployments with Edge Image Builder"/><link rel="next" href="guides-clusterclass-example.html" title="Chapter 30. Using clusterclass to deploy downstream clusters"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="wide offline js-off"><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">SUSE Edge Documentation</a><span> / </span><a class="crumb" href="id-how-to-guides.html">How-To Guides</a><span> / </span><a class="crumb" href="guides-kiwi-builder-images.html">Building Updated SUSE Linux Micro Images with Kiwi</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">SUSE Edge Documentation</div><ol><li><a href="suse-edge-documentation.html" class=" "><span class="title-number"> </span><span class="title-name">SUSE Edge 3.4 Documentation</span></a></li><li><a href="id-quick-starts.html" class="has-children "><span class="title-number">I </span><span class="title-name">Quick Starts</span></a><ol><li><a href="quickstart-metal3.html" class=" "><span class="title-number">1 </span><span class="title-name">BMC automated deployments with Metal<sup>3</sup></span></a></li><li><a href="quickstart-elemental.html" class=" "><span class="title-number">2 </span><span class="title-name">Remote host onboarding with Elemental</span></a></li><li><a href="quickstart-eib.html" class=" "><span class="title-number">3 </span><span class="title-name">Standalone clusters with Edge Image Builder</span></a></li><li><a href="quickstart-suma.html" class=" "><span class="title-number">4 </span><span class="title-name">SUSE Multi-Linux Manager</span></a></li></ol></li><li><a href="id-components.html" class="has-children "><span class="title-number">II </span><span class="title-name">Components</span></a><ol><li><a href="components-rancher.html" class=" "><span class="title-number">5 </span><span class="title-name">Rancher</span></a></li><li><a href="components-rancher-dashboard-extensions.html" class=" "><span class="title-number">6 </span><span class="title-name">Rancher Dashboard Extensions</span></a></li><li><a href="components-rancher-turtles.html" class=" "><span class="title-number">7 </span><span class="title-name">Rancher Turtles</span></a></li><li><a href="components-fleet.html" class=" "><span class="title-number">8 </span><span class="title-name">Fleet</span></a></li><li><a href="components-slmicro.html" class=" "><span class="title-number">9 </span><span class="title-name">SUSE Linux Micro</span></a></li><li><a href="components-metal3.html" class=" "><span class="title-number">10 </span><span class="title-name">Metal<sup>3</sup></span></a></li><li><a href="components-eib.html" class=" "><span class="title-number">11 </span><span class="title-name">Edge Image Builder</span></a></li><li><a href="components-nmc.html" class=" "><span class="title-number">12 </span><span class="title-name">Edge Networking</span></a></li><li><a href="components-elemental.html" class=" "><span class="title-number">13 </span><span class="title-name">Elemental</span></a></li><li><a href="components-akri.html" class=" "><span class="title-number">14 </span><span class="title-name">Akri</span></a></li><li><a href="components-k3s.html" class=" "><span class="title-number">15 </span><span class="title-name">K3s</span></a></li><li><a href="components-rke2.html" class=" "><span class="title-number">16 </span><span class="title-name">RKE2</span></a></li><li><a href="components-suse-storage.html" class=" "><span class="title-number">17 </span><span class="title-name">SUSE Storage</span></a></li><li><a href="components-suse-security.html" class=" "><span class="title-number">18 </span><span class="title-name">SUSE Security</span></a></li><li><a href="components-metallb.html" class=" "><span class="title-number">19 </span><span class="title-name">MetalLB</span></a></li><li><a href="components-eco.html" class=" "><span class="title-number">20 </span><span class="title-name">Endpoint Copier Operator</span></a></li><li><a href="components-kubevirt.html" class=" "><span class="title-number">21 </span><span class="title-name">Edge Virtualization</span></a></li><li><a href="components-system-upgrade-controller.html" class=" "><span class="title-number">22 </span><span class="title-name">System Upgrade Controller</span></a></li><li><a href="components-upgrade-controller.html" class=" "><span class="title-number">23 </span><span class="title-name">Upgrade Controller</span></a></li><li><a href="components-suma.html" class=" "><span class="title-number">24 </span><span class="title-name">SUSE Multi-Linux Manager</span></a></li></ol></li><li class="active"><a href="id-how-to-guides.html" class="has-children you-are-here"><span class="title-number">III </span><span class="title-name">How-To Guides</span></a><ol><li><a href="guides-metallb-k3s.html" class=" "><span class="title-number">25 </span><span class="title-name">MetalLB on K3s (using Layer 2 Mode)</span></a></li><li><a href="guides-metallb-k3s-l3.html" class=" "><span class="title-number">26 </span><span class="title-name">MetalLB on K3s (using Layer 3 Mode)</span></a></li><li><a href="guides-metallb-kubernetes.html" class=" "><span class="title-number">27 </span><span class="title-name">MetalLB in front of the Kubernetes API server</span></a></li><li><a href="id-air-gapped-deployments-with-edge-image-builder.html" class=" "><span class="title-number">28 </span><span class="title-name">Air-gapped deployments with Edge Image Builder</span></a></li><li><a href="guides-kiwi-builder-images.html" class=" you-are-here"><span class="title-number">29 </span><span class="title-name">Building Updated SUSE Linux Micro Images with Kiwi</span></a></li><li><a href="guides-clusterclass-example.html" class=" "><span class="title-number">30 </span><span class="title-name">Using clusterclass to deploy downstream clusters</span></a></li></ol></li><li><a href="tips-and-tricks.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Tips and Tricks</span></a><ol><li><a href="tips-edge-image-builder.html" class=" "><span class="title-number">31 </span><span class="title-name">Edge Image Builder</span></a></li><li><a href="tips-elemental.html" class=" "><span class="title-number">32 </span><span class="title-name">Elemental</span></a></li></ol></li><li><a href="id-third-party-integration.html" class="has-children "><span class="title-number">V </span><span class="title-name">Third-Party Integration</span></a><ol><li><a href="integrations-nats.html" class=" "><span class="title-number">33 </span><span class="title-name">NATS</span></a></li><li><a href="id-nvidia-gpus-on-suse-linux-micro.html" class=" "><span class="title-number">34 </span><span class="title-name">NVIDIA GPUs on SUSE Linux Micro</span></a></li></ol></li><li><a href="day-2-operations.html" class="has-children "><span class="title-number">VI </span><span class="title-name">Day 2 Operations</span></a><ol><li><a href="day2-migration.html" class=" "><span class="title-number">35 </span><span class="title-name">Edge 3.3 migration</span></a></li><li><a href="day2-mgmt-cluster.html" class=" "><span class="title-number">36 </span><span class="title-name">Management Cluster</span></a></li><li><a href="day2-downstream-clusters.html" class=" "><span class="title-number">37 </span><span class="title-name">Downstream clusters</span></a></li></ol></li><li><a href="id-suse-telco-cloud-documentation.html" class="has-children "><span class="title-number">VII </span><span class="title-name">SUSE Telco Cloud Documentation</span></a><ol><li><a href="atip.html" class=" "><span class="title-number">38 </span><span class="title-name">SUSE Telco Cloud</span></a></li><li><a href="atip-architecture.html" class=" "><span class="title-number">39 </span><span class="title-name">Concept &amp; Architecture</span></a></li><li><a href="atip-requirements.html" class=" "><span class="title-number">40 </span><span class="title-name">Requirements &amp; Assumptions</span></a></li><li><a href="atip-management-cluster.html" class=" "><span class="title-number">41 </span><span class="title-name">Setting up the management cluster</span></a></li><li><a href="atip-features.html" class=" "><span class="title-number">42 </span><span class="title-name">Telco features configuration</span></a></li><li><a href="atip-automated-provisioning.html" class=" "><span class="title-number">43 </span><span class="title-name">Fully automated directed network provisioning</span></a></li><li><a href="atip-lifecycle.html" class=" "><span class="title-number">44 </span><span class="title-name">Lifecycle actions</span></a></li></ol></li><li><a href="id-troubleshooting-3.html" class="has-children "><span class="title-number">VIII </span><span class="title-name">Troubleshooting</span></a><ol><li><a href="general-troubleshooting-principles.html" class=" "><span class="title-number">45 </span><span class="title-name">General Troubleshooting Principles</span></a></li><li><a href="troubleshooting-kiwi.html" class=" "><span class="title-number">46 </span><span class="title-name">Troubleshooting Kiwi</span></a></li><li><a href="troubleshooting-edge-image-builder.html" class=" "><span class="title-number">47 </span><span class="title-name">Troubleshooting Edge Image Builder (EIB)</span></a></li><li><a href="troubleshooting-edge-networking.html" class=" "><span class="title-number">48 </span><span class="title-name">Troubleshooting Edge Networking (NMC)</span></a></li><li><a href="troubleshooting-phone-home-scenarios.html" class=" "><span class="title-number">49 </span><span class="title-name">Troubleshooting Phone-Home scenarios</span></a></li><li><a href="troubleshooting-directed-network-provisioning.html" class=" "><span class="title-number">50 </span><span class="title-name">Troubleshooting Directed-network provisioning</span></a></li><li><a href="troubleshooting-other-components.html" class=" "><span class="title-number">51 </span><span class="title-name">Troubleshooting Other components</span></a></li><li><a href="collecting-diagnostics-for-support.html" class=" "><span class="title-number">52 </span><span class="title-name">Collecting Diagnostics for Support</span></a></li></ol></li><li><a href="id-appendix.html" class="has-children "><span class="title-number">IX </span><span class="title-name">Appendix</span></a><ol><li><a href="id-release-notes.html" class=" "><span class="title-number">53 </span><span class="title-name">Release Notes</span></a></li></ol></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="guides-kiwi-builder-images" data-id-title="Building Updated SUSE Linux Micro Images with Kiwi"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">29 </span><span class="title-name">Building Updated SUSE Linux Micro Images with Kiwi</span></span> <a title="Permalink" class="permalink" href="guides-kiwi-builder-images.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>This section explains how to generate updated SUSE Linux Micro images to be used with Edge Image Builder, with Cluster API (CAPI) + Metal<sup>3</sup>, or to write the disk image directly to a block device. This process is useful in situations where the latest patches are required to be included in the initial system boot images (to minimise patch transfer post-installation), or for scenarios where CAPI is used, where it’s preferred to reinstall the operating system with a new image rather than upgrading the hosts in place.</p><p>This process makes use of <a class="link" href="https://osinside.github.io/kiwi/" target="_blank">Kiwi</a> to run the image build. SUSE Edge ships with a containerized version that simplifies the overall process with a helper utility baked in, allowing to specify the target <span class="strong"><strong>profile</strong></span> required. The profile defines the type of output image that is required, with the common ones listed below:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>"<span class="strong"><strong>Base</strong></span>" - A SUSE Linux Micro disk image with a reduced package set (it includes podman).</p></li><li class="listitem"><p>"<span class="strong"><strong>Base-SelfInstall</strong></span>" - A SelfInstall image based on the "Base" above.</p></li><li class="listitem"><p>"<span class="strong"><strong>Base-RT</strong></span>" - Same as "Base" above but using a real-time (rt) kernel instead.</p></li><li class="listitem"><p>"<span class="strong"><strong>Base-RT-SelfInstall</strong></span>" - A SelfInstall image based on the "Base-RT" above</p></li><li class="listitem"><p>"<span class="strong"><strong>Default</strong></span>" - A SUSE Linux Micro disk image based on the "Base" above but with a few more tools, including the virtualization stack, Cockpit and salt-minion.</p></li><li class="listitem"><p>"<span class="strong"><strong>Default-SelfInstall</strong></span>" - A SelfInstall image based on the "Default" above</p></li></ul></div><p>See <a class="link" href="https://documentation.suse.com/sle-micro/6.1/html/Micro-deployment-images/index.html#alp-images-installer-type" target="_blank">SUSE Linux Micro 6.1</a> documentation for more details.</p><p>This process works for both AMD64/Intel 64 and AArch64 architectures, although not all image profiles are available for both architectures, e.g. in SUSE Edge 3.4, where SUSE Linux Micro 6.1 is used, a profile with a real-time kernel (i.e. "Base-RT" or "Base-RT-SelfInstall") is not currently available for AArch64.</p><div id="id-1.5.7.7" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>It is required to use a build host with the same architecture of the images being built. In other words, to build an AArch64 image, it is required to use an AArch64 build host, and vice-versa for AMD64/Intel 64 - cross-builds are not supported at this time.</p></div><section class="sect1" id="id-prerequisites-11" data-id-title="Prerequisites"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">29.1 </span><span class="title-name">Prerequisites</span></span> <a title="Permalink" class="permalink" href="guides-kiwi-builder-images.html#id-prerequisites-11">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>Kiwi image builder requires the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>A SUSE Linux Micro 6.1 host ("build system") with the same architecture of the image being built.</p></li><li class="listitem"><p>The build system needs to be already registered via <code class="literal">SUSEConnect</code> (the registration is used to pull the latest packages from the SUSE repositories)</p></li><li class="listitem"><p>An internet connection that can be used to pull the required packages. If connected via proxy, the build host needs to be pre-configured.</p></li><li class="listitem"><p>SELinux needs to be disabled on the build host (as SELinux labelling takes place in the container and it can conflict with the host policy)</p></li><li class="listitem"><p>At least 10GB free disk space to accommodate the container image, the build root, and the resulting output image(s)</p></li></ul></div></section><section class="sect1" id="id-getting-started-2" data-id-title="Getting Started"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">29.2 </span><span class="title-name">Getting Started</span></span> <a title="Permalink" class="permalink" href="guides-kiwi-builder-images.html#id-getting-started-2">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>Due to certain limitations, it is currently required to disable SELinux. Connect to the SUSE Linux Micro 6.1 image build host and ensure SELinux is disabled:</p><div class="verbatim-wrap"><pre class="screen"># setenforce 0</pre></div><p>Create an output directory to be shared with the Kiwi build container to save the resulting images:</p><div class="verbatim-wrap"><pre class="screen"># mkdir ~/output</pre></div><p>Pull the latest Kiwi builder image from the SUSE Registry:</p><div class="verbatim-wrap"><pre class="screen"># podman pull registry.suse.com/edge/3.4/kiwi-builder:10.2.12.0
(...)</pre></div></section><section class="sect1" id="id-building-the-default-image" data-id-title="Building the Default Image"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">29.3 </span><span class="title-name">Building the Default Image</span></span> <a title="Permalink" class="permalink" href="guides-kiwi-builder-images.html#id-building-the-default-image">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>This is the default behavior of the Kiwi image container if no arguments are provided during the container image run. The following command runs <code class="literal">podman</code> with two directories mapped to the container:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The <code class="literal">/etc/zypp/repos.d</code> SUSE Linux Micro package repository directory from the underlying host.</p></li><li class="listitem"><p>The output <code class="literal">~/output</code> directory created above.</p></li></ul></div><p>The Kiwi image container requires to run the <code class="literal">build-image</code> helper script as:</p><div class="verbatim-wrap"><pre class="screen"># podman run --privileged -v /etc/zypp/repos.d:/micro-sdk/repos/ -v ~/output:/tmp/output \
    -it registry.suse.com/edge/3.4/kiwi-builder:10.2.12.0 build-image
(...)</pre></div><div id="id-1.5.7.10.6" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>It’s expected that if you’re running this script for the first time that it will <span class="strong"><strong>fail</strong></span> shortly after starting with "<span class="strong"><strong>ERROR: Early loop device test failed, please retry the container run.</strong></span>", this is a symptom of loop devices being created on the underlying host system that are not immediately visible inside of the container image. Simply re-run the command again and it should proceed without issue.</p></div><p>After a few minutes the images can be found in the local output directory:</p><div class="verbatim-wrap"><pre class="screen">(...)
INFO: Image build successful, generated images are available in the 'output' directory.

# ls -1 output/
SLE-Micro.x86_64-6.1.changes
SLE-Micro.x86_64-6.1.packages
SLE-Micro.x86_64-6.1.raw
SLE-Micro.x86_64-6.1.verified
build
kiwi.result
kiwi.result.json</pre></div></section><section class="sect1" id="id-building-images-with-other-profiles" data-id-title="Building images with other profiles"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">29.4 </span><span class="title-name">Building images with other profiles</span></span> <a title="Permalink" class="permalink" href="guides-kiwi-builder-images.html#id-building-images-with-other-profiles">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>In order to build different image profiles, the "<span class="strong"><strong>-p</strong></span>" command option in the Kiwi container image helper script is used. For example, to build the "<span class="strong"><strong>Default-SelfInstall</strong></span>" ISO image:</p><div class="verbatim-wrap"><pre class="screen"># podman run --privileged -v /etc/zypp/repos.d:/micro-sdk/repos/ -v ~/output:/tmp/output \
    -it registry.suse.com/edge/3.4/kiwi-builder:10.2.12.0 build-image -p Default-SelfInstall
(...)</pre></div><div id="id-1.5.7.11.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>To avoid data loss, Kiwi will refuse to run if there are images in the <code class="literal">output</code> directory. It is required to remove the contents of the output directory before proceeding with <code class="literal">rm -f output/*</code>.</p></div><p>Alternatively, to build a SelfInstall ISO image with the RealTime kernel ("<span class="strong"><strong>kernel-rt</strong></span>"):</p><div class="verbatim-wrap"><pre class="screen"># podman run --privileged -v /etc/zypp/repos.d:/micro-sdk/repos/ -v ~/output:/tmp/output \
    -it registry.suse.com/edge/3.4/kiwi-builder:10.2.12.0 build-image -p Base-RT-SelfInstall
(...)</pre></div></section><section class="sect1" id="id-building-images-with-large-sector-sizes" data-id-title="Building images with large sector sizes"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">29.5 </span><span class="title-name">Building images with large sector sizes</span></span> <a title="Permalink" class="permalink" href="guides-kiwi-builder-images.html#id-building-images-with-large-sector-sizes">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>Some hardware requires an image with a large sector size, i.e. <span class="strong"><strong>4096 bytes</strong></span> rather than the standard 512 bytes. The containerized Kiwi builder supports the ability to generate images with large block size by specifying the "<span class="strong"><strong>-b</strong></span>" parameter. For example, to build a "<span class="strong"><strong>Default-SelfInstall</strong></span>" image with a large sector size:</p><div class="verbatim-wrap"><pre class="screen"># podman run --privileged -v /etc/zypp/repos.d:/micro-sdk/repos/ -v ~/output:/tmp/output \
    -it registry.suse.com/edge/3.4/kiwi-builder:10.2.12.0 build-image -p Default-SelfInstall -b
(...)</pre></div></section><section class="sect1" id="id-using-a-custom-kiwi-image-definition-file" data-id-title="Using a custom Kiwi image definition file"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">29.6 </span><span class="title-name">Using a custom Kiwi image definition file</span></span> <a title="Permalink" class="permalink" href="guides-kiwi-builder-images.html#id-using-a-custom-kiwi-image-definition-file">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>For advanced use-cases a custom Kiwi image definition file (<code class="literal">SL-Micro.kiwi</code>) can be used along with any necessary post-build scripts. This requires overriding the default definitions pre-packaged by the SUSE Edge team.</p><p>Create a new directory and map it into the container image where the helper script is looking (<code class="literal">/micro-sdk/defs</code>):</p><div class="verbatim-wrap"><pre class="screen"># mkdir ~/mydefs/
# cp /path/to/SL-Micro.kiwi ~/mydefs/
# cp /path/to/config.sh ~/mydefs/
# podman run --privileged -v /etc/zypp/repos.d:/micro-sdk/repos/ -v ~/output:/tmp/output -v ~/mydefs/:/micro-sdk/defs/ \
    -it registry.suse.com/edge/3.4/kiwi-builder:10.2.12.0 build-image
(...)</pre></div><div id="id-1.5.7.13.5" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning</div><p>This is only required for advanced use-cases and may cause supportability issues. Please contact your SUSE representative for further advice and guidance.</p></div><p>To get the default Kiwi image definition files included in the container, the following commands can be used:</p><div class="verbatim-wrap"><pre class="screen">$ podman create --name kiwi-builder registry.suse.com/edge/3.4/kiwi-builder:10.2.12.0
$ podman cp kiwi-builder:/micro-sdk/defs/SL-Micro.kiwi .
$ podman cp kiwi-builder:/micro-sdk/defs/SL-Micro.kiwi.4096 .
$ podman rm kiwi-builder
$ ls ./SL-Micro.*
(...)</pre></div></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="id-air-gapped-deployments-with-edge-image-builder.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 28 </span>Air-gapped deployments with Edge Image Builder</span></a> </div><div><a class="pagination-link next" href="guides-clusterclass-example.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 30 </span>Using clusterclass to deploy downstream clusters</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="section"><a href="guides-kiwi-builder-images.html#id-prerequisites-11"><span class="title-number">29.1 </span><span class="title-name">Prerequisites</span></a></span></li><li><span class="section"><a href="guides-kiwi-builder-images.html#id-getting-started-2"><span class="title-number">29.2 </span><span class="title-name">Getting Started</span></a></span></li><li><span class="section"><a href="guides-kiwi-builder-images.html#id-building-the-default-image"><span class="title-number">29.3 </span><span class="title-name">Building the Default Image</span></a></span></li><li><span class="section"><a href="guides-kiwi-builder-images.html#id-building-images-with-other-profiles"><span class="title-number">29.4 </span><span class="title-name">Building images with other profiles</span></a></span></li><li><span class="section"><a href="guides-kiwi-builder-images.html#id-building-images-with-large-sector-sizes"><span class="title-number">29.5 </span><span class="title-name">Building images with large sector sizes</span></a></span></li><li><span class="section"><a href="guides-kiwi-builder-images.html#id-using-a-custom-kiwi-image-definition-file"><span class="title-number">29.6 </span><span class="title-name">Using a custom Kiwi image definition file</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2025</span></div></div></footer></body></html>